<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="920" viewBox="0 0 1600 920">
  <defs>
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L12,6 L0,12 z" fill="#222"/>
    </marker>
    <style>
      .title { font: 700 58px 'Segoe UI', Arial, sans-serif; fill: #121212; }
      .badge { font: 700 34px 'Segoe UI', Arial, sans-serif; fill: #ffffff; letter-spacing: 3px; }
      .label { font: 600 36px 'Segoe UI', Arial, sans-serif; fill: #1e1e1e; }
      .sub { font: 500 28px 'Segoe UI', Arial, sans-serif; fill: #1e1e1e; }
      .io  { font: 500 23px 'Segoe UI', Arial, sans-serif; fill: #1e1e1e; }
      .line { stroke: #111; stroke-width: 5; fill: none; marker-end: url(#arrow); }
      .lineBiA { stroke: #111; stroke-width: 5; fill: none; marker-end: url(#arrow); }
      .lineBiB { stroke: #111; stroke-width: 5; fill: none; marker-start: url(#arrow); }
    </style>
  </defs>

  <rect x="0" y="0" width="1600" height="920" fill="#efefef"/>

  <text x="24" y="86" class="title">PROJECT SYSTEM</text>
  <rect x="430" y="22" width="510" height="72" rx="18" fill="#31c7b0"/>
  <text x="465" y="72" class="badge">BLOCK DIAGRAM</text>

  <rect x="72" y="204" width="370" height="168" rx="18" fill="#31c7b0"/>
  <rect x="56" y="186" width="370" height="168" rx="18" fill="#f5f5f5" stroke="#222" stroke-width="4"/>
  <text x="118" y="236" class="label">Security Sensors</text>
  <text x="88" y="282" class="io">Reed, PIR, Vibration, Ultrasonic,</text>
  <text x="88" y="314" class="io">Keypad, Manual Buttons</text>

  <rect x="72" y="522" width="370" height="132" rx="18" fill="#31c7b0"/>
  <rect x="56" y="504" width="370" height="132" rx="18" fill="#f5f5f5" stroke="#222" stroke-width="4"/>
  <text x="136" y="554" class="label">Automation Sensors</text>
  <text x="122" y="600" class="io">BH1750 (Lux), DHT (Temp/Hum)</text>

  <rect x="604" y="52" width="390" height="96" rx="18" fill="#31c7b0"/>
  <rect x="588" y="34" width="390" height="96" rx="18" fill="#f5f5f5" stroke="#222" stroke-width="4"/>
  <text x="708" y="94" class="label">MQTT Broker</text>

  <rect x="604" y="214" width="390" height="192" rx="18" fill="#31c7b0"/>
  <rect x="588" y="196" width="390" height="192" rx="18" fill="#f5f5f5" stroke="#222" stroke-width="4"/>
  <text x="660" y="248" class="label">Main Board (ESP32)</text>
  <text x="660" y="294" class="sub">Security Orchestrator</text>
  <text x="660" y="332" class="io">Rule Engine, Timeout, Door Session</text>
  <text x="660" y="364" class="io">Lock/Alarm Policy + Status Publish</text>

  <rect x="604" y="534" width="390" height="166" rx="18" fill="#31c7b0"/>
  <rect x="588" y="516" width="390" height="166" rx="18" fill="#f5f5f5" stroke="#222" stroke-width="4"/>
  <text x="620" y="566" class="label">Automation Board (ESP32)</text>
  <text x="620" y="612" class="sub">Light/Fan Automation Pipeline</text>
  <text x="620" y="650" class="io">Presence Gate + Hysteresis Control</text>

  <rect x="1122" y="166" width="390" height="154" rx="18" fill="#31c7b0"/>
  <rect x="1106" y="148" width="390" height="154" rx="18" fill="#f5f5f5" stroke="#222" stroke-width="4"/>
  <text x="1202" y="198" class="label">LINE Bridge</text>
  <text x="1150" y="244" class="sub">FastAPI + MQTT + Line API</text>
  <text x="1150" y="280" class="io">Command/Auth/Notify Gateway</text>

  <rect x="1168" y="384" width="288" height="102" rx="18" fill="#31c7b0"/>
  <rect x="1152" y="366" width="288" height="102" rx="18" fill="#f5f5f5" stroke="#222" stroke-width="4"/>
  <text x="1242" y="430" class="label">LINE OA / User</text>

  <rect x="1122" y="566" width="390" height="220" rx="18" fill="#31c7b0"/>
  <rect x="1106" y="548" width="390" height="220" rx="18" fill="#f5f5f5" stroke="#222" stroke-width="4"/>
  <text x="1240" y="598" class="label">Actuators</text>
  <text x="1142" y="644" class="io">Door lock / Window lock (Servo)</text>
  <text x="1142" y="678" class="io">Buzzer + OLED (Main Board)</text>
  <text x="1142" y="712" class="io">Light LED + Fan via L293D</text>
  <text x="1142" y="746" class="io">(Automation Board)</text>

  <path class="line" d="M427 270 L580 270"/>
  <path class="line" d="M427 568 L580 604"/>
  <path class="line" d="M782 130 L782 194"/>
  <path class="line" d="M782 388 L782 516"/>
  <path class="lineBiA" d="M981 84 L1102 218"/>
  <path class="lineBiB" d="M981 96 L1102 230"/>
  <path class="lineBiA" d="M1439 434 L1490 434 L1490 316 L1439 316"/>
  <path class="lineBiB" d="M1439 418 L1490 418 L1490 300 L1439 300"/>
  <path class="line" d="M980 286 L1102 648"/>
  <path class="line" d="M980 616 L1102 704"/>

  <text x="1000" y="170" class="io">cmd / status / ack</text>
  <text x="1260" y="344" class="io">chat command</text>
  <text x="1272" y="458" class="io">notify</text>
</svg>
